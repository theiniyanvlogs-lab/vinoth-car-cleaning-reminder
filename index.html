<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Vinoth Car Cleaning â€“ Paid / Pending</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      padding: 15px;
    }
    h2 {
      text-align: center;
    }
    .form, .list {
      background: #fff;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      padding: 10px;
      width: 100%;
      margin-top: 10px;
      border: none;
      border-radius: 6px;
      font-size: 15px;
      cursor: pointer;
    }
    .add {
      background: #007bff;
      color: white;
    }
    .paid {
      background: #28a745;
      color: white;
    }
    .pending {
      background: #dc3545;
      color: white;
    }
    .whatsapp {
      background: #25D366;
      color: white;
      margin-top: 5px;
    }
    .card {
      border-bottom: 1px solid #ddd;
      padding: 10px 0;
    }
    small {
      color: #666;
    }

    /* Lock screen */
    #lockScreen {
      max-width: 380px;
      margin: 80px auto;
      padding: 20px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      text-align: center;
    }
  </style>
</head>
<body>

<!-- ðŸ”’ PASSWORD LOCK SCREEN -->
<div id="lockScreen">
  <h3>ðŸ”’ Enter Password</h3>
  <input
    type="password"
    id="passwordInput"
    placeholder="Enter password"
  >
  <button onclick="unlockApp()" class="add">Unlock</button>
  <p id="errorText" style="color:red;"></p>
</div>

<!-- ðŸ”“ MAIN APP -->
<div id="appContent" style="display:none;">

<h2>ðŸš— Vinoth Car Cleaning â€“ Payments</h2>

<div class="form">
  <h3>Add Customer</h3>
  <input id="ownerName" placeholder="Owner Name">
  <input id="mobile" placeholder="WhatsApp Number (91XXXXXXXXXX)">
  <input id="month" placeholder="Month (Ex: March 2026)">
  <input id="amount" type="number" value="600">
  <select id="status">
    <option value="pending">Pending</option>
    <option value="paid">Paid</option>
  </select>
  <button class="add" onclick="addPayment()">Add</button>
</div>

<div class="list">
  <h3>Paid / Pending List</h3>
  <div id="paymentList"></div>
</div>

</div>

<script>
  /* =====================
     PASSWORD LOGIC
     ===================== */
  const ALLOWED_PASSWORDS = ["vinoth600", "clean@247"];

  function unlockApp() {
    const entered = document.getElementById("passwordInput").value;
    if (ALLOWED_PASSWORDS.includes(entered)) {
      localStorage.setItem("appUnlocked", "yes");
      document.getElementById("lockScreen").style.display = "none";
      document.getElementById("appContent").style.display = "block";
    } else {
      document.getElementById("errorText").innerText = "Wrong password";
    }
  }

  if (localStorage.getItem("appUnlocked") === "yes") {
    document.getElementById("lockScreen").style.display = "none";
    document.getElementById("appContent").style.display = "block";
  }

  /* =====================
     PAYMENT LOGIC
     ===================== */
  let payments = JSON.parse(localStorage.getItem("payments")) || [];

  function save() {
    localStorage.setItem("payments", JSON.stringify(payments));
    render();
  }

  function addPayment() {
    const data = {
      name: document.getElementById("ownerName").value,
      mobile: document.getElementById("mobile").value,
      month: document.getElementById("month").value,
      amount: document.getElementById("amount").value,
      status: document.getElementById("status").value
    };

    if (!data.name || !data.mobile || !data.month) {
      alert("Please fill all details");
      return;
    }

    payments.push(data);
    save();

    document.getElementById("ownerName").value = "";
    document.getElementById("mobile").value = "";
    document.getElementById("month").value = "";
    document.getElementById("amount").value = 600;
    document.getElementById("status").value = "pending";
  }

  function markPaid(i) {
    payments[i].status = "paid";
    save();
  }

  function sendReminder(i) {
    const p = payments[i];
    const msg =
`Hi Sir/Madam,
Car cleaning charge of â‚¹${p.amount} for ${p.month} is pending.
Kindly make the payment when convenient.

Thank you,
Vinoth
+91 7358461020
Madha Kovil Street, Nolambur`;

    window.open(
      "https://wa.me/" + p.mobile + "?text=" + encodeURIComponent(msg),
      "_blank"
    );
  }

  function render() {
    paymentList.innerHTML = "";
    payments.forEach((p, i) => {
      paymentList.innerHTML += `
        <div class="card">
          <b>${p.name}</b> â€“ ${p.month}<br>
          â‚¹${p.amount} â€¢ <small>${p.status.toUpperCase()}</small><br>
          ${
            p.status === "pending"
              ? `<button class="pending" onclick="markPaid(${i})">Mark as Paid</button>
                 <button class="whatsapp" onclick="sendReminder(${i})">Send Reminder</button>`
              : `<button class="paid">Paid</button>`
          }
        </div>
      `;
    });
  }

  render();
</script>

</body>
</html>
